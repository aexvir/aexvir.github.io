!(function(e,t){"object"==typeof exports?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e)})(this,(function(e){function t(e){this._targetElement=void 0!==e.length?e:[e],void 0===window._progressjsId&&(window._progressjsId=1),void 0===window._progressjsIntervals&&(window._progressjsIntervals={}),this._options={theme:"blue",overlayMode:!1,considerTransition:!0}}function r(e,t){var r=this;100<=t&&(t=100),e.hasAttribute("data-progressjs")&&setTimeout((function(){void 0!==r._onProgressCallback&&r._onProgressCallback.call(r,e,t);var n=s(e);n.style.width=parseInt(t)+"%";var n=n.querySelector(".progressjs-percent"),o=parseInt(n.innerHTML.replace("%","")),i=parseInt(t),a=function(e,t,r){var s=Math.abs(t-r);3>s?d=30:20>s?d=20:intervanIn=1,0!=t-r&&(e.innerHTML=(l?++t:--t)+"%",setTimeout((function(){a(e,t,r)}),d))},l=!0;o>i&&(l=!1);var d=10;a(n,o,i)}),50)}function s(e){return e=parseInt(e.getAttribute("data-progressjs")),document.querySelector('.progressjs-container > .progressjs-progress[data-progressjs="'+e+'"] > .progressjs-inner')}function n(e){for(var t=0,n=this._targetElement.length;t<n;t++){var o=this._targetElement[t];if(o.hasAttribute("data-progressjs")){var i=s(o);(i=parseInt(i.style.width.replace("%","")))&&r.call(this,o,i+(e||1))}}}function o(){var e,t=document.createElement("fakeelement"),r={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in r)if(void 0!==t.style[e])return r[e]}var i=function(e){if("object"==typeof e)return new t(e);if("string"==typeof e){if(e=document.querySelectorAll(e))return new t(e);throw Error("There is no element with given selector.")}return new t(document.body)};return i.version="0.1.0",i.fn=t.prototype={clone:function(){return new t(this)},setOption:function(e,t){return this._options[e]=t,this},setOptions:function(e){var t,r=this._options,s={};for(t in r)s[t]=r[t];for(t in e)s[t]=e[t];return this._options=s,this},start:function(){if(void 0!==this._onBeforeStartCallback&&this._onBeforeStartCallback.call(this),!document.querySelector(".progressjs-container")){var e=document.createElement("div");e.className="progressjs-container",document.body.appendChild(e)}for(var e=0,t=this._targetElement.length;e<t;e++){var s=this._targetElement[e];if(!s.hasAttribute("data-progressjs")){var n,o,i,a=s;"body"===a.tagName.toLowerCase()?(n=a.clientWidth,o=a.clientHeight):(n=a.offsetWidth,o=a.offsetHeight);for(var l=i=0;a&&!isNaN(a.offsetLeft)&&!isNaN(a.offsetTop);)i+=a.offsetLeft,l+=a.offsetTop,a=a.offsetParent;a=l,s.setAttribute("data-progressjs",window._progressjsId),l=document.createElement("div"),l.className="progressjs-progress progressjs-theme-"+this._options.theme,l.style.position="body"===s.tagName.toLowerCase()?"fixed":"absolute",l.setAttribute("data-progressjs",window._progressjsId);var d=document.createElement("div");d.className="progressjs-inner";var c=document.createElement("div");c.className="progressjs-percent",c.innerHTML="1%",d.appendChild(c),this._options.overlayMode&&"body"===s.tagName.toLowerCase()?(l.style.left=0,l.style.right=0,l.style.top=0,l.style.bottom=0):(l.style.left=i+"px",l.style.top=a+"px",l.style.width=n+"px",this._options.overlayMode&&(l.style.height=o+"px")),l.appendChild(d),document.querySelector(".progressjs-container").appendChild(l),r(s,1),++window._progressjsId}}return this},set:function(e){for(var t=0,s=this._targetElement.length;t<s;t++)r.call(this,this._targetElement[t],e);return this},increase:function(e){return n.call(this,e),this},autoIncrease:function(e,t){var r=this,s=parseInt(this._targetElement[0].getAttribute("data-progressjs"));return void 0!==window._progressjsIntervals[s]&&clearInterval(window._progressjsIntervals[s]),window._progressjsIntervals[s]=setInterval((function(){n.call(r,e)}),t),this},end:function(){e:{void 0!==this._onBeforeEndCallback&&(!0===this._options.considerTransition?s(this._targetElement[0]).addEventListener(o(),this._onBeforeEndCallback,!1):this._onBeforeEndCallback.call(this));for(var e=parseInt(this._targetElement[0].getAttribute("data-progressjs")),t=0,n=this._targetElement.length;t<n;t++){var i=this._targetElement[t],a=s(i);if(!a)break e;var l=1;100>parseInt(a.style.width.replace("%",""))&&(r.call(this,i,100),l=500),(function(e,t){setTimeout((function(){e.parentNode.className+=" progressjs-end",setTimeout((function(){e.parentNode.parentNode.removeChild(e.parentNode),t.removeAttribute("data-progressjs")}),1e3)}),l)})(a,i)}if(window._progressjsIntervals[e])try{clearInterval(window._progressjsIntervals[e]),window._progressjsIntervals[e]=null,delete window._progressjsIntervals[e]}catch(e){}}return this},onbeforeend:function(e){if("function"!=typeof e)throw Error("Provided callback for onbeforeend was not a function");return this._onBeforeEndCallback=e,this},onbeforestart:function(e){if("function"!=typeof e)throw Error("Provided callback for onbeforestart was not a function");return this._onBeforeStartCallback=e,this},onprogress:function(e){if("function"!=typeof e)throw Error("Provided callback for onprogress was not a function");return this._onProgressCallback=e,this}},e.progressJs=i}));
//# sourceMappingURL=progress.js.map
